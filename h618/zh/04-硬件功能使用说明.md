# 04-硬件功能使用说明





## 1. 扩展引脚

开发板配备20Pin扩展引脚，其中包含普通GPIO、I2C、UART、SPI等接口。





### 1.1. GPIO

K1开发板的扩展40Pin引脚中默认有9路可控GPIO。

首先，通过 [[扩展引脚]] 章节，确认GPIO引脚位置、编号，参考以下步骤可对指定GPIO进行状态控制。



#### 用户层控制GPIO电平

**查看GPIO注册列表**

```
$ ls /sys/class/leds/

gpio1b0/ gpio1b2/ gpio1d4/ gpio3b6/ 
gpio1a4/ gpio1b1/ gpio1d0/ gpio3b5/ gpio4c4/
```



**命令行控制GPIO**

```
$ echo 1 > /sys/class/leds/gpio3b6/brightness
$ echo 0 > /sys/class/leds/gpio3b6/brightness
```





### 1.2. UART

#### 调试串口使用

**开发板调试串口接线**

调试串口内嵌到扩展40Pin引脚上，可通过 [[扩展引脚]] 章节 或下图查看调试串口位置

![image-20231215153008926](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20231215153008926.png)



**下载串口助手软件**

串口助手软件 可自行下载，下面以Mobaxterm为例

Mobaxterm软件地址下载：https://mobaxterm.mobatek.net/



**Mobaxterm操作步骤**

1. 新建会话窗口
2. 选择会话窗口类型为serial
3. 选择串口COM编号（打开Windows系统 设备管理器 -> 端口界面可查看COM编号）
4. 选择串口波特率1500000
5. 启动会话窗口



![image-20230519113450846](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20230519113450846.png)





#### *普通串口收发测试





### 1.3. I2C





### 1.4. SPI







## 2. LED

开发板配备两个LED灯，默认状态下，绿色LED为电源指示灯，蓝色LED为心跳指示灯

电源指示灯上电即长亮，心跳灯内核启动后持续闪烁。另外，可参考以下方面控制LED作为其他功能。

通过两个LED灯的状态，可初步判断开发板运行的状态。

若电源指示灯不亮则检查电源部分异常，若心跳指示灯不闪烁则系统运行异常。



### 用户层控制LED状态

默认LED触发方式为heartbeat，此方式下LED状态不可人为控制。

若想要实现命令控制LED状态的话，可通过以下命令设置为none，然后再设置LED的brightness

```
$ echo none > /sys/class/leds/work-led/trigger
$ echo 1 > /sys/class/leds/work-led/brightness
$ echo 0 > /sys/class/leds/work-led/brightness
```





## 5. USB

### OTG模式切换

Android13.0系统 USB默认支持OTG模式，可自动切换主从功能

Linux系统 USB默认为HOST模式，暂不支持OTG



## 6. PWM

RK3568 有4个PWM模块，每个PWM模块有4路PWM，一共有16路PWM

### 用户层配置PWM输出

Extend 40Pin接口 包含多路PWM，以PWM3通道为例，按照以下命令进入PWM配置

按照示例配置参数设置成功后，可用万用表测量PWM3引脚，正确电压应为1.6V左右



示例：设置PWM3通道，周期10000ns，占空比5000ns，极性为normal

```
$ echo 0 > /sys/class/pwm/pwmchip0/export
$ echo 10000 > /sys/class/pwm/pwmchip0/pwm0/period
$ echo 5000 > /sys/class/pwm/pwmchip0/pwm0/duty_cycle
$ echo normal > /sys/class/pwm/pwmchip0/pwm0/polarity
$ echo 1 > /sys/class/pwm/pwmchip0/pwm0/enable
```





## 7. WIFI

K1开发板 配备RTL8822CS高性能WIFI模块

支持2.4G/5G双频段，WIFI5，2T2R



![image-20231215153316513](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20231215153316513.png)

### *图形界面配置WIFI





### *命令行配置WIFI







## 8. BlueTooth

K1开发板 配备RTL8822CS高性能蓝牙模块

### *图形界面配对蓝牙设备





### *命令行配对蓝牙设备





## 9. KEY

K2B配备



## 10. IR



## 11. SD CARD



## 12. HDMI



## 13. 以太网







## 16. GPU

### Debian GLmark2性能测试

RK Linux文件系统内置glmark2-es性能测试工具

板卡连接显示设备，打开虚拟终端 或 调试串口终端，执行以下命令开始GPU性能测试

```
$ source /rockchip-test/gpu/test_fullscreen_glmark2.sh

# 终端打印最终测试成绩分数
=======================================================
                                  glmark2 Score: 471
=======================================================
```

> 外接显示屏可查看GPU渲染图形，调试串口可查看GPU渲染日志
>
> 根据GPU性能差异，大概需要等待10分钟左右可完成性能测试



## 17. 耳机/模拟视频信号

### 硬件接线

耳机音频播放音频测试，若耳机完全插到底，可能会有杂音，可

![image-20240123104101888](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20240123104101888.png)



### 音频播放测试

Android12.0 TV系统

设置中开启模拟音频输出
