# 04-扩展工具

K5扩展引脚 

开发板配备20Pin扩展引脚，其中包含普通GPIO、I2C、UART、SPI等接口。

![image-20241009150239258](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20241009150239258.png)



K5Ck扩展引脚

![image-20250515144550428](http://tanzhtanzh.oss-cn-shenzhen.aliyuncs.com/img/image-20250515144550428.png)

* 带 * 号为默认软件默认配置功能
* UART0_RX / TX  默认软件为调试串口
* TWI即I2C，TWI1_SCK / TWI1_SDA 等同 I2C_CLK / I2C_SDA



## 串口

查看设备节点

```
$ ls dev/ttyS*
```

ttyS0<-> DEBUG_UART0

ttyS2<->UART2

ttyS7<->S_UART

设置波特率

``` 
stty -F /dev/ttyS2 ispeed 115200 ospeed 115200 cs8
```

向串口发送数据

``` shell
echo kickpi > /dev/ttyAS2
```

接收数据

``` shell
cat /dev/ttyAS2 
```



## GPIO

### sys led控制

直接将gpio注册成led可通过对led的brightness节点控制高低电平

开发板的扩展20Pin引脚中默认有9路可控GPIO。

首先，通过 [扩展引脚](#扩展引脚) 章节，确认GPIO引脚位置、编号，参考以下步骤可对指定GPIO进行状态控制。

高电平电压：PB-3.3V PC-1.8V

**查看led注册列表**

```
$ ls /sys/class/leds/
	PC7  PC12  PI6  sys_led
```



**命令行控制GPIO电平**

```
$ echo 1 > /sys/class/leds/sys_led/brightness
$ echo 0 > /sys/class/leds/sys_led/brightness
```



**读取GPIO电平**

```
$ cat /sys/class/leds/sys_led/brightness
```

> 0为低电平
>
> 255为高电平



**比如控制 PH8 引脚**

```shell
console:/ # ls /sys/class/leds/
PH8 fan_en spk_en sysled
console:/ # ls /sys/class/leds/PH8
brightness device max_brightness power subsystem trigger uevent
console:/ #
console:/ # cat /sys/class/leds/PH8/brightness
255
console:/ #
console:/ # echo 0 > /sys/class/leds/PH8/brightness
console:/ #
console:/ # cat /sys/class/leds/PH8/brightness
0
console:/ # echo 1 > /sys/class/leds/PH8/brightness
console:/ # cat /sys/class/leds/PH8/brightness
1
console:/ #
```







## LRADC

位置：开发板 20Pin [扩展引脚](扩展引脚) 1 号脚

* 低速率ADC（LRADC）
* 6位分辨率
* 采样率高达2 kHz
* 支持保持键和通用键
* 支持正常、持续和单一工作模式
* 电源电压： 1.8 V，功率参考电压： 1.35 V，模拟输入，检测电压范围：0~LEVELB（最大值为1.266 V）

>开发和使用见 'LRADC按键配置' 文档